<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Daniela Palleschi">

<title>Angewandte Datenverarbeitung und Visualisierung (WiSe23/24) - 9&nbsp; Data Wrangling 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../mats/10-dataviz_3.html" rel="next">
<link href="../mats/08-desc_stats.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: {autoNumber: "AMS"} },
  tex2jax: {inlineMath: [ ['$','$'], ["\\(","\\)"] ]}
});
</script>

<!-- This is what works with Quarto -->
<script>
  MathJax = {
    tex: {
      tags: 'ams'  // should be 'ams', 'none', or 'all'
    }
  };
</script>

<script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">


<meta name="twitter:title" content="Angewandte Datenverarbeitung und Visualisierung (WiSe23/24) - 9&nbsp; Data Wrangling 2">
<meta name="twitter:description" content="Datenbereinigung (Data tidying)">
<meta name="twitter:image" content="09-wrangling_2_files/figure-html/fig-workflow-1.png">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Angewandte Datenverarbeitung und Visualisierung (WiSe23/24)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Suchen"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Navigation umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://daniela-palleschi.github.io/" rel="" target=""><i class="bi bi-home" role="img">
</i> 
 <span class="menu-text">D. Palleschi</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/daniela-palleschi/r4ling" rel="" target=""><i class="bi bi-github" role="img" aria-label="Source Code">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://moodle.hu-berlin.de/course/view.php?id=124123" rel="" target=""><i class="bi bi-life-preserver" role="img">
</i> 
 <span class="menu-text">Moodle</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
    <a href="../r4ling_de_ws2324.pdf" rel="" title="Download PDF" class="quarto-navigation-tool px-1" aria-label="Download PDF"><i class="bi bi-file-pdf"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Dunkelmodus umschalten"><i class="bi"></i></a>
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../mats/07-dateneinlesung.html">Nächste Stufe</a></li><li class="breadcrumb-item"><a href="../mats/09-wrangling_2.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Wrangling 2</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Seitenleiste umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Suchen"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Kursübersicht</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Kursübersicht</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../syllabus.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Syllabus</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../setup/setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Erforderliche Software</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Grundlagen</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/01-intro_r.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Einführung in R und RStudio</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/02-dataviz_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Datenvisualiserung 1</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/03-quarto_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Dynamic reports with Quarto</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/04-wrangling_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Data Wrangling 1: Transformation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/05-dataviz_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Datenvisualisierung 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/06-bericht_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Bericht 1</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Nächste Stufe</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Abschnitt umschalten">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/07-dateneinlesung.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Einlesen von Daten</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/08-desc_stats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Deskriptive Statistik</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/09-wrangling_2.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Wrangling 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/10-dataviz_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Datenvisualisierung 2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mats/11-bericht_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bericht 2</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Fortgeschrittene Themen</span></span>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Literaturverzeichnis</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Kapitelinhalt</h2>
   
  <ul>
  <li><a href="#lernziele" id="toc-lernziele" class="nav-link active" data-scroll-target="#lernziele">Lernziele</a></li>
  <li><a href="#lesungen" id="toc-lesungen" class="nav-link" data-scroll-target="#lesungen">Lesungen</a></li>
  <li><a href="#wiederholung" id="toc-wiederholung" class="nav-link" data-scroll-target="#wiederholung"><span class="header-section-number">9.1</span> Wiederholung</a></li>
  <li><a href="#einrichtung" id="toc-einrichtung" class="nav-link" data-scroll-target="#einrichtung"><span class="header-section-number">9.2</span> Einrichtung</a></li>
  <li><a href="#tidy-arbeitsablauf" id="toc-tidy-arbeitsablauf" class="nav-link" data-scroll-target="#tidy-arbeitsablauf"><span class="header-section-number">9.3</span> ‘Tidy’ Arbeitsablauf</a></li>
  <li><a href="#tidy-daten" id="toc-tidy-daten" class="nav-link" data-scroll-target="#tidy-daten"><span class="header-section-number">9.4</span> ‘Tidy’ Daten</a>
  <ul class="collapse">
  <li><a href="#warum-tidy-daten" id="toc-warum-tidy-daten" class="nav-link" data-scroll-target="#warum-tidy-daten"><span class="header-section-number">9.4.1</span> Warum ‘tidy’ Daten?</a></li>
  </ul></li>
  <li><a href="#datenbereinigung" id="toc-datenbereinigung" class="nav-link" data-scroll-target="#datenbereinigung"><span class="header-section-number">9.5</span> Datenbereinigung</a>
  <ul class="collapse">
  <li><a href="#datenaufräumung-mit-dem-tidyverse" id="toc-datenaufräumung-mit-dem-tidyverse" class="nav-link" data-scroll-target="#datenaufräumung-mit-dem-tidyverse"><span class="header-section-number">9.5.1</span> Datenaufräumung mit dem <code>tidyverse</code></a></li>
  <li><a href="#breite-versus-lange-daten" id="toc-breite-versus-lange-daten" class="nav-link" data-scroll-target="#breite-versus-lange-daten"><span class="header-section-number">9.5.2</span> Breite versus lange Daten</a></li>
  </ul></li>
  <li><a href="#verlängern-von-daten-df_eng" id="toc-verlängern-von-daten-df_eng" class="nav-link" data-scroll-target="#verlängern-von-daten-df_eng"><span class="header-section-number">9.6</span> Verlängern von Daten: <code>df_eng</code></a>
  <ul class="collapse">
  <li><a href="#pivot_longer" id="toc-pivot_longer" class="nav-link" data-scroll-target="#pivot_longer"><span class="header-section-number">9.6.1</span> <code>pivot_longer()</code></a></li>
  </ul></li>
  <li><a href="#verbreiterung-der-daten-df_eng" id="toc-verbreiterung-der-daten-df_eng" class="nav-link" data-scroll-target="#verbreiterung-der-daten-df_eng"><span class="header-section-number">9.7</span> Verbreiterung der Daten: <code>df_eng</code></a>
  <ul class="collapse">
  <li><a href="#pivot_wider" id="toc-pivot_wider" class="nav-link" data-scroll-target="#pivot_wider"><span class="header-section-number">9.7.1</span> <code>pivot_wider()</code></a></li>
  </ul></li>
  <li><a href="#hausaufgaben" id="toc-hausaufgaben" class="nav-link" data-scroll-target="#hausaufgaben"><span class="header-section-number">9.8</span> Hausaufgaben</a></li>
  <li><a href="#session-info" id="toc-session-info" class="nav-link" data-scroll-target="#session-info">Session Info</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Data Wrangling 2</span></h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
<p class="subtitle lead">Datenbereinigung (Data tidying)</p>
</div>


<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Autor:in</div>
  <div class="quarto-title-meta-heading">Zugehörigkeit</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Daniela Palleschi </p>
  </div>
    <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Humboldt-Universität zu Berlin
          </p>
      </div>
    </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Veröffentlichungsdatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">Mi. den 13.12.2023</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Geändert</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">Di. den 12.12.2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="lernziele" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="lernziele">Lernziele</h2>
<p>In diesem Kapitel werden wir lernen…</p>
<ul>
<li>über breite versus lange Daten</li>
<li>wie man breite Daten länger machen kann</li>
<li>wie man lange Daten breiter macht</li>
</ul>
</section>
<section id="lesungen" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="lesungen">Lesungen</h2>
<p>Die <strong>Pflichtlektüre</strong> zur Vorbereitung auf dieses Thema ist <a href="https://r4ds.hadley.nz/data-tidy">Kapital 6 (Data tidying)</a> in <span class="citation" data-cites="wickham_r_2023">Wickham et al. (<a href="01-intro_r.html#ref-wickham_r_2023" role="doc-biblioref">2023</a>)</span>.</p>
<p>Eine <strong>ergänzende Lektüre</strong> ist <a href="https://psyteachr.github.io/ads-v2/08-tidy.html">Kapital 8 (Data tidying)</a> in <span class="citation" data-cites="nordmann_applied_2022">Nordmann &amp; DeBruine (<a href="01-intro_r.html#ref-nordmann_applied_2022" role="doc-biblioref">2022</a>)</span>.</p>
</section>
<section id="wiederholung" class="level2 unnummeriert" data-number="9.1">
<h2 class="unnummeriert anchored" data-number="9.1" data-anchor-id="wiederholung"><span class="header-section-number">9.1</span> Wiederholung</h2>
<p>Im letzten Kapitel haben wir etwas über deskriptive Statistik gelernt, insbesondere über Maße der zentralen Tendenz (Mittelwert, Median, Modus) und der Streuung (Bereich, Standardabweichung). Wir haben auch gesehen, wie man diese Werte mit Base R (z. B. <code>mean()</code>, <code>sd()</code>) und der <code>tidyverse</code> (z. B. <code>summarise()</code>) und nach Gruppen (<code>summarise(.by = )</code>) berechnet.</p>
<p>In diesem Kapitel werden wir das Konzept der aufgeräumten Daten besprechen und sehen, wie wir unsere Daten organisieren und neu anordnen können, damit sie aufgeräumt sind.</p>
</section>
<section id="einrichtung" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="einrichtung"><span class="header-section-number">9.2</span> Einrichtung</h2>
<p>Wir brauchen die Pakete <code>tidyverse</code>, <code>here</code>, und <code>janitor</code>.</p>
<p>We’ll use the <code>languageR_english.csv</code> dataset (in <code>daten</code> folder).</p>
</section>
<section id="tidy-arbeitsablauf" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="tidy-arbeitsablauf"><span class="header-section-number">9.3</span> ‘Tidy’ Arbeitsablauf</h2>
<p><a href="#fig-workflow">Abbildung&nbsp;<span>9.1</span></a> zeigt einen Überblick über den typischen Data-Science-Prozess, bei dem wir unsere Daten importieren, sie bereinigen und dann einen Zyklus von Umwandlung, Visualisierung und Modellierung durchlaufen, bevor wir schließlich unsere Ergebnisse mitteilen.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-workflow" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="09-wrangling_2_files/figure-html/fig-workflow-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Abbildung&nbsp;9.1: <a href="https://r4ds.hadley.nz/intro.html">Image source:</a> <span class="citation" data-cites="wickham_r_2023">Wickham et al. (<a href="01-intro_r.html#ref-wickham_r_2023" role="doc-biblioref">2023</a>)</span> (all rights reserved)</figcaption>
</figure>
</div>
</div>
</div>
<p>Wir haben bereits gesehen, wie wir unsere Daten importieren (<code>readr::read_csv</code>), transformieren (Paket <code>dplyr</code>) und visualisieren (Paket <code>ggplot</code>) können. Aber wir haben bisher nur aufgeräumte Daten gesehen, so dass wir den Schritt “aufräumen” nicht durchführen mussten.</p>
</section>
<section id="tidy-daten" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="tidy-daten"><span class="header-section-number">9.4</span> ‘Tidy’ Daten</h2>
<p>Dieselben Daten können auf verschiedene Weise dargestellt werden. Die folgenden Datensätze zeigen alle dieselben Werte für vier Variablen: Land, Jahr, Bevölkerungszahl und Anzahl der Tuberkulosefälle. Jeder Datensatz ordnet die Werte anders an. Nehmen Sie sich einen Moment Zeit, um die verschiedenen Optionen zu betrachten. Welche ist am einfachsten zu lesen?</p>
<div class="cell" data-output-location="fragment">
<div class="cell-output-display">
<div id="tbl-1" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabelle&nbsp;9.1: Tabelle 1</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cases</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">population</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">745</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">2666</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">37737</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">80488</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">212258</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: right;">213766</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell" data-output-location="fragment">
<div class="cell-output-display">
<div id="tbl-2" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabelle&nbsp;9.2: Tabelle 2</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">type</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">count</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">745</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">19987071</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">2666</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">37737</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">172006362</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">80488</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">212258</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">1272915272</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">cases</td>
<td style="text-align: right;">213766</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">population</td>
<td style="text-align: right;">1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="cell" data-output-location="fragment">
<div class="cell-output-display">
<div id="tbl-3" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabelle&nbsp;9.3: Tabelle 3</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">country</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rate</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">745/19987071</td>
</tr>
<tr class="even">
<td style="text-align: left;">Afghanistan</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">2666/20595360</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">37737/172006362</td>
</tr>
<tr class="even">
<td style="text-align: left;">Brazil</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">80488/174504898</td>
</tr>
<tr class="odd">
<td style="text-align: left;">China</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">212258/1272915272</td>
</tr>
<tr class="even">
<td style="text-align: left;">China</td>
<td style="text-align: right;">2000</td>
<td style="text-align: left;">213766/1280428583</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>Wahrscheinlich ist <a href="#tbl-1">Tabelle&nbsp;<span>9.1</span></a> für Sie am einfachsten zu lesen. Das liegt daran, dass sie den drei Regeln für aufgeräumte Daten folgt (visualisiert in <a href="#fig-tidy">Abbildung&nbsp;<span>9.2</span></a>):</p>
<ol type="1">
<li>Jede Variable ist eine Spalte, jede Spalte ist eine Variable</li>
<li>Jede Beobachtung ist eine Zeile, jede Zeile ist eine Beobachtung</li>
<li>Jeder Wert ist eine Zelle, jede Zelle ist ein Einzelwert</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-tidy" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="09-wrangling_2_files/figure-html/fig-tidy-1.png" class="img-fluid figure-img" style="width:90.0%"></p>
<figcaption class="figure-caption">Abbildung&nbsp;9.2: <a href="https://r4ds.hadley.nz/data-tidy.html">Image source:</a> <span class="citation" data-cites="wickham_r_2023">Wickham et al. (<a href="01-intro_r.html#ref-wickham_r_2023" role="doc-biblioref">2023</a>)</span> (all rights reserved)</figcaption>
</figure>
</div>
</div>
</div>
<p>In <a href="#tbl-1">Tabelle&nbsp;<span>9.1</span></a> steht jede Spalte für eine Variable: <code>country</code>, <code>year</code>, <code>population</code> und <code>case</code>. Jede Zeile steht für eine einzelne Beobachtung: ein Land in einem bestimmten Jahr. Und schließlich enthält jede Zelle einen einzigen Wert.</p>
<section id="warum-tidy-daten" class="level3" data-number="9.4.1">
<h3 data-number="9.4.1" class="anchored" data-anchor-id="warum-tidy-daten"><span class="header-section-number">9.4.1</span> Warum ‘tidy’ Daten?</h3>
<blockquote class="blockquote">
<p>“<strong>Glückliche Familien</strong> sind alle gleich; jede <strong>unglückliche Familie</strong> ist auf ihre eigene Art unglücklich.” — Leo Tolstoy</p>
</blockquote>
<blockquote class="blockquote">
<p>“<strong>Saubere Datensätze</strong> sind alle gleich, aber jeder <strong>unordentliche Datensatz</strong> ist auf seine eigene Weise unordentlich.” — Hadley Wickham</p>
</blockquote>
<p>Wenn Sie erst einmal ‘tidy’ Daten haben, verbringen Sie weniger Zeit mit dem Versuch, Ihre Daten in die richtige Form zu bringen, um das zu tun, was Sie wollen. Das Aufräumen von Daten erfordert im Vorfeld etwas Arbeit, ist aber langfristig gesehen hilfreich.</p>
<p>Die Arbeit mit aufgeräumten Daten hat zwei wesentliche Vorteile:</p>
<ol type="1">
<li>Die Arbeit mit einer einheitlichen Datenstruktur ermöglicht es uns, Konventionen zu übernehmen.
<ul>
<li>Da aufgeräumte Daten die allgemein vereinbarte Datenstruktur sind, basieren die Konventionen auf der Annahme dieser Struktur.</li>
<li>so haben die Werkzeuge eine zugrunde liegende Einheitlichkeit</li>
</ul></li>
<li>Die vektorisierte Natur von R kann glänzen
<ul>
<li>die meisten eingebauten R-Funktionen arbeiten mit <em>Vektorwerten</em> (und Spalten sind im Wesentlichen Vektoren)</li>
<li>Alle Pakete im <code>tidyverse</code> sind darauf ausgelegt, mit aufgeräumten Daten zu arbeiten (z.B. <code>ggplot2</code> und <code>dplyr</code>)</li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Rückblick: Vektoren
</div>
</div>
<div class="callout-body-container callout-body">
<p>Vektoren sind der grundlegendste Datenobjekttyp in R. Ein Vektor enthält Daten desselben Typs und ist im Wesentlichen eine Liste. Sie können einen Vektor z.B. mit der Funktion <code>c()</code> erzeugen.</p>
<p><code>Vektor1</code> enthält numerische Werte, da alle Elemente Zahlen sind. <code>vector2</code> wird alle Zeichenwerte (d.h. Text) enthalten, da es ein einziges eindeutiges Zeichenelement (<code>"x"</code>) gibt. R liest also alle Elemente als Zeichentyp. Wir können einen Datenrahmen aus Vektoren gleicher Länge erstellen, indem wir z. B. die Funktion <code>tibble()</code> verwenden.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  vector1 vector2
    &lt;dbl&gt; &lt;chr&gt;  
1       2 2      
2       3 3      
3       4 4      
4       6 6      
5       7 x      </code></pre>
</div>
</div>
</div>
</div>
<p>Die meisten Daten “in freier Wildbahn” sind unordentlich. Die Daten werden oft zunächst für ein anderes Ziel als die Analyse organisiert. Dieses Ziel ist in der Regel die Erleichterung der Dateneingabe: Wir wollen unsere Beobachtungen zunächst einfach dokumentieren können. Die meisten Menschen sind mit den Grundsätzen ordentlicher Daten nicht vertraut, und erst wenn sie <em>viel</em> Zeit mit Daten verbringen, wird klar, warum ordentliche Daten notwendig sind. Das bedeutet, dass die meisten <em>echten</em> Analysen zumindest ein gewisses Maß an Aufräumen erfordern.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<a href="#exm-tidy">Aufgabe&nbsp;<span>9.1</span></a>: Tidy data
</div>
</div>
<div class="callout-body-container callout-body">
<div id="exm-tidy" class="custom theorem example">
<p><span class="theorem-title"><strong>Beispiel 9.1 </strong></span>&nbsp;</p>
<div class="nonincremental">
<ol type="1">
<li>Gehen Sie zurück zu den Tabellen 1-3. Beschreiben Sie für jede Tabelle, was jede Beobachtung und jede Spalte darstellt.</li>
<li>Skizzieren Sie das Verfahren, mit dem Sie die Rate für <code>table1</code>. berechnen würden. Sie brauchen nur ein Verb, das:
<ul>
<li>eine neue Variable erzeugt (nennen Sie sie <code>rate</code>), die Folgendes enthält:
<ul>
<li>die Anzahl der TB-Fälle (<code>cases</code>) pro Land und Jahr, geteilt durch</li>
<li>die entsprechende Bevölkerung (<code>population</code>) pro Land und Jahr,</li>
<li>multipliziert mit <code>10000</code></li>
</ul></li>
<li>Hinweis: Welches <code>dplyr</code>-Verb erzeugt neue Variablen? (Sehen Sie sich das <a href="04-wrangling_1.html"><span>Kapitel&nbsp;4</span></a> an.)</li>
</ul></li>
<li>Schauen Sie die <a href="#tbl-2">Tabelle&nbsp;<span>9.2</span></a> und <a href="#tbl-3">Tabelle&nbsp;<span>9.3</span></a> an. Wäre es so einfach gewesen, die <code>rate</code> mit diesen Datenstrukturen zu berechnen?</li>
</ol>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="datenbereinigung" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="datenbereinigung"><span class="header-section-number">9.5</span> Datenbereinigung</h2>
<p>Die Datenbereinigung besteht im Wesentlichen aus der Umwandlung breiter Daten in lange Daten und langer Daten in breite Daten (neben anderen Schritten). Das Ergebnis sind aufgeräumte Daten, bei denen jede Spalte eine Variable und jede Zeile eine Beobachtung darstellt. Wie genau wir eine Beobachtung definieren, hängt davon ab, was genau wir erreichen wollen, und kann sich von einem Analyseschritt zum anderen ändern.</p>
<section id="datenaufräumung-mit-dem-tidyverse" class="level3" data-number="9.5.1">
<h3 data-number="9.5.1" class="anchored" data-anchor-id="datenaufräumung-mit-dem-tidyverse"><span class="header-section-number">9.5.1</span> Datenaufräumung mit dem <code>tidyverse</code></h3>
<p>Das Paket <code>tidyr</code> aus <code>tidyverse</code> hat zwei nützliche Funktionen zum Transponieren unserer Daten:</p>
<ul>
<li><code>pivot_longer()</code>: macht breite Daten länger</li>
<li><code>pivot_wider()</code>: lange Daten breiter machen</li>
</ul>
<p>Oft müssen wir zwischen diesen Formaten konvertieren, um verschiedene Arten von Zusammenfassungen oder Visualisierungen zu erstellen. Aber was genau sind breite und lange Daten?</p>
<div class="cell" data-layout-align="center" data-fig-cap-location="bottom">
<div class="cell-output-display">
<div id="fig-pivot-html" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="09-wrangling_2_files/figure-html/fig-pivot-html-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption class="figure-caption">Abbildung&nbsp;9.3: die berühmteste Verwendung des Wortes Pivot (zumindest für Millenials) (<a href="https://www.youtube.com/watch?v=8w3wmQAMoxQ">Friends</a>)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="breite-versus-lange-daten" class="level3" data-number="9.5.2">
<h3 data-number="9.5.2" class="anchored" data-anchor-id="breite-versus-lange-daten"><span class="header-section-number">9.5.2</span> Breite versus lange Daten</h3>
<p>Bei breiten Daten befinden sich alle Beobachtungen zu einer Sache in derselben Zeile. Breite Daten sind <em>normalerweise</em> nicht aufgeräumt. Bei langen Daten befindet sich jede Beobachtung in einer eigenen Zeile. Lange Daten sind <em>normalerweise</em> aufgeräumt. Beginnen wir mit dem typischsten Fall: der Umwandlung breiter Daten in lange Daten.</p>
</section>
</section>
<section id="verlängern-von-daten-df_eng" class="level2" data-number="9.6">
<h2 data-number="9.6" class="anchored" data-anchor-id="verlängern-von-daten-df_eng"><span class="header-section-number">9.6</span> Verlängern von Daten: <code>df_eng</code></h2>
<ul>
<li>im Datensatz <code>languageR_english.csv</code>
<ul>
<li>jede Zeile ist eine Beobachtung</li>
<li>die erste Spalte beschreibt die Altersgruppe des Teilnehmers</li>
<li>die Spalten <code>word</code>, <code>length_in_letters</code>, <code>written_frequency</code> und <code>word_category</code> beschreiben Eigenschaften des Stimulus für eine bestimmte Beobachtung (d.&nbsp;h. das Wort)</li>
<li>wir haben 4568 Beobachtungen</li>
</ul></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-df_eng" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabelle&nbsp;9.4: df_eng</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">age_subject</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">word</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">length_in_letters</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">written_frequency</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">word_category</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rt_lexdec</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rt_naming</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">623.61</td>
<td style="text-align: right;">456.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">775.67</td>
<td style="text-align: right;">607.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">617.10</td>
<td style="text-align: right;">445.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">715.52</td>
<td style="text-align: right;">639.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">575.70</td>
<td style="text-align: right;">467.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">742.19</td>
<td style="text-align: right;">605.4</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<ul>
<li>Sind diese Daten in <a href="#tbl-df_eng">Tabelle&nbsp;<span>9.4</span></a> aufgeräumt?</li>
<li>Sind diese Daten zu breit oder zu lang?</li>
<li>Wie können wir diese Daten länger machen?</li>
</ul>
<p>Ob wir diese Daten verlängern wollen oder nicht, hängt von der jeweiligen Aufgabe ab. Wenn wir die Antwortzeiten für die lexikalische Entscheidungsaufgabe (<code>rt_lexdec</code>) zusammen mit der Antwortzeit für die Benennungsaufgabe (<code>rt_naming</code>) aufzeichnen wollen, könnten wir die beiden in <code>facet_wrap()</code> einschließen. Allerdings nimmt <code>facet_wrap()</code> eine <em>kategorische</em> Variable als Argument und erzeugt Diagramme für jede Kategorie. Wir bräuchten eine neue Variable, zum Beispiel <code>response</code>, die die Stufen <code>lexdec</code> und <code>naming</code> enthält, und eine weitere, zum Beispiel <code>time</code>, die die Antwortzeit enthält. Versuchen wir das mal.</p>
<section id="pivot_longer" class="level3" data-number="9.6.1">
<h3 data-number="9.6.1" class="anchored" data-anchor-id="pivot_longer"><span class="header-section-number">9.6.1</span> <code>pivot_longer()</code></h3>
<p>Die Funktion <code>tidyr</code> <code>pivot_longer()</code> konvertiert eine breite Datentabelle in ein längeres Format, indem sie die Überschriften der angegebenen Spalten in die Werte neuer Spalten umwandelt und die Werte dieser Spalten zu einer neuen, zusammengefassten Spalte kombiniert.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df_eng_long <span class="ot">&lt;-</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  df_eng <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"rt_"</span>), </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"response"</span>, </span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"time"</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Die Ausgabe der ersten 12 Zeilen (nach einigen zusätzlichen Formatierungen, um eine hübsche Tabelle zu erstellen) sollte wie <a href="#tbl-longer">Tabelle&nbsp;<span>9.5</span></a> aussehen.</p>
<div class="cell" data-output-location="column-fragment">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>df_eng_long <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">20</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="tbl-longer" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabelle&nbsp;9.5: A pivoted version of <code>df_billboard</code> (first 10 rows)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">age_subject</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">word</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">length_in_letters</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">written_frequency</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">word_category</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">response</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">rt_lexdec</td>
<td style="text-align: right;">623.61</td>
</tr>
<tr class="even">
<td style="text-align: left;">young</td>
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">rt_naming</td>
<td style="text-align: right;">456.30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">old</td>
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">rt_lexdec</td>
<td style="text-align: right;">775.67</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: left;">rt_naming</td>
<td style="text-align: right;">607.80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">rt_lexdec</td>
<td style="text-align: right;">617.10</td>
</tr>
<tr class="even">
<td style="text-align: left;">young</td>
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">rt_naming</td>
<td style="text-align: right;">445.80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">old</td>
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">rt_lexdec</td>
<td style="text-align: right;">715.52</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">rt_naming</td>
<td style="text-align: right;">639.70</td>
</tr>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">rt_lexdec</td>
<td style="text-align: right;">575.70</td>
</tr>
<tr class="even">
<td style="text-align: left;">young</td>
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">rt_naming</td>
<td style="text-align: right;">467.80</td>
</tr>
<tr class="odd">
<td style="text-align: left;">old</td>
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">rt_lexdec</td>
<td style="text-align: right;">742.19</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: left;">rt_naming</td>
<td style="text-align: right;">605.40</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p>Nehmen wir uns einen Moment Zeit, um die Werte in <a href="#tbl-longer">Tabelle&nbsp;<span>9.5</span></a> mit denen der ersten 6 Zeilen in <code>df_eng</code> zu vergleichen, die in <a href="#tbl-df_eng">Tabelle&nbsp;<span>9.4</span></a> angegeben sind. Vergleichen Sie die Werte in der <code>df_eng</code>-Variablen <code>rt_lexdec</code> (<a href="#tbl-df_eng">Tabelle&nbsp;<span>9.4</span></a>) mit den <code>time</code>-Werten, wenn <code>response</code> <code>rt_lexdec</code> (<a href="#tbl-longer">Tabelle&nbsp;<span>9.5</span></a>) ist: Sie sind identisch. Was ist nun mit <code>rt_naming</code> sowohl in <a href="#tbl-df_eng">Tabelle&nbsp;<span>9.4</span></a> als auch in <a href="#tbl-longer">Tabelle&nbsp;<span>9.5</span></a>? Sie sind ebenfalls identisch. Dies ist eine wichtige Erkenntnis: Wir haben keine Daten oder Beobachtungswerte geändert, sondern lediglich die Organisation der Datenpunkte neu strukturiert.</p>
<p>Wie hat <code>pivot_longer()</code> das gemacht? Hier ist eine Aufschlüsselung der Argumente, die <code>pivot_longer()</code> benötigt (die Sie auch durch Ausführen von <code>?pivot_longer</code> in der Konsole untersuchen können):</p>
<ul>
<li><code>col =</code> gibt an, welche Spalten gepivotet werden müssen (sollte eine kategorische Variable sein)
<ul>
<li>nimmt die gleiche Syntax wie <code>select()</code>, also könnten wir z.B. <code>starts_with("")</code> verwenden</li>
</ul></li>
<li><code>names_to =</code> benennt die Variable, die in den aktuellen Spaltennamen gespeichert ist, hier ist es <code>response</code></li>
<li><code>values_to =</code> benennt die in den Zellwerten gespeicherte Variable, die wir <code>time</code> nennen</li>
<li>N.B., wir mussten <code>response</code> und <code>time</code> in Anführungszeichen setzen, weil sie <em>noch</em> keine Variablennamen sind.</li>
</ul>
<section id="plotten-unserer-tidy-daten" class="level4" data-number="9.6.1.1">
<h4 data-number="9.6.1.1" class="anchored" data-anchor-id="plotten-unserer-tidy-daten"><span class="header-section-number">9.6.1.1</span> Plotten unserer ‘tidy’ Daten</h4>
<p>Da wir nun die <code>response</code>-Daten in einer Variable und die <code>time</code>-Daten in einer anderen Variable haben, wollen wir versuchen, ein Diagramm zu erstellen, in dem wir <code>age_subject</code> auf der x-Achse, <code>time</code> auf der y-Achse und <code>response</code> auf der y-Achse haben.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-eng" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="09-wrangling_2_files/figure-html/fig-eng-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;9.4: Response times per age group for the lexical decision task vs.&nbsp;naming task</figcaption>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<a href="#exm-tidy">Aufgabe&nbsp;<span>9.1</span></a>: Tidy data
</div>
</div>
<div class="callout-body-container callout-body">
<div id="exm-help" class="custom theorem example">
<p><span class="theorem-title"><strong>Beispiel 9.2 </strong></span>&nbsp;</p>
<div class="nonincremental">
<p><a href="#fig-eng">Abbildung&nbsp;<span>9.4</span></a> neu erstellen.</p>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="verbreiterung-der-daten-df_eng" class="level2" data-number="9.7">
<h2 data-number="9.7" class="anchored" data-anchor-id="verbreiterung-der-daten-df_eng"><span class="header-section-number">9.7</span> Verbreiterung der Daten: <code>df_eng</code></h2>
<p>Die <code>tidyr</code>-Funktion <code>pivot_wider()</code> macht Datensätze <em>breiter</em>, indem sie Spalten vergrößert und Zeilen verkleinert. Dies ist hilfreich, wenn eine Beobachtung über mehrere Zeilen verteilt ist. Obwohl diese Art von Daten in der freien Wildbahn nicht sehr häufig vorkommt, ist sie zum Beispiel bei Regierungsdaten ziemlich verbreitet.</p>
<p>Wir können wieder mit <code>df_eng</code> beginnen, um die Daten zu erweitern. Zum Beispiel könnten wir eine einzelne Zeile pro <em>Wort</em> haben, die eine einzelne Variable für die Antwort des “jungen” Probanden und die Antwort des “alten” Probanden enthält.</p>
<section id="pivot_wider" class="level3" data-number="9.7.1">
<h3 data-number="9.7.1" class="anchored" data-anchor-id="pivot_wider"><span class="header-section-number">9.7.1</span> <code>pivot_wider()</code></h3>
<p>Pivot wider nimmt ähnliche Argumente wie <code>pivot_longer()</code>, mit einigen leichten Unterschieden (z.B. <code>?pivot_wider</code>):</p>
<ul>
<li><code>id_cols</code>: identifizierende Spalten (welche Spalten identifizieren jede Beobachtung eindeutig?)</li>
<li><code>names_from</code>: wie soll die neue Spalte heißen, die die vorherigen Spaltennamen enthält (muss eine kategorische Variable sein)?</li>
<li><code>names_prefix</code>: Präfix für die neuen Spaltennamen (optional)</li>
<li>Werte_von`: neue Spaltenwerte</li>
</ul>
<p>Erstellen wir zwei neue Variablen, die ihre Namen von <code>age_subject</code> und ihre Werte von <code>rt_lexdec</code> übernehmen. Das Ergebnis sollte wie <span class="quarto-unresolved-ref">?tbl-eng_wider</span> aussehen.</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-eng_wide" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabelle&nbsp;9.6: Wider <code>df_eng</code> data</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">word</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">length_in_letters</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">written_frequency</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">word_category</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lexdec_young</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lexdec_old</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">623.61</td>
<td style="text-align: right;">775.67</td>
</tr>
<tr class="even">
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">617.10</td>
<td style="text-align: right;">715.52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">575.70</td>
<td style="text-align: right;">742.19</td>
</tr>
<tr class="even">
<td style="text-align: left;">age</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.397959</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">592.42</td>
<td style="text-align: right;">748.37</td>
</tr>
<tr class="odd">
<td style="text-align: left;">aid</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">6.927558</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">541.67</td>
<td style="text-align: right;">824.76</td>
</tr>
<tr class="even">
<td style="text-align: left;">aide</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.615120</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">693.50</td>
<td style="text-align: right;">895.29</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<p><a href="#tbl-df_eng-2">Tabelle&nbsp;<span>9.7</span></a> zeigt wieder die ersten 6 Zeilen des Originaldatensatzes. Wie werden die Daten aus <a href="#tbl-eng_wide">Tabelle&nbsp;<span>9.6</span></a> in <a href="#tbl-df_eng-2">Tabelle&nbsp;<span>9.7</span></a> dargestellt?</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-df_eng-2" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabelle&nbsp;9.7: head(df_eng, n = 6)</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">age_subject</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">word</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">length_in_letters</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">written_frequency</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">word_category</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rt_lexdec</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rt_naming</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">623.61</td>
<td style="text-align: right;">456.3</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">775.67</td>
<td style="text-align: right;">607.8</td>
</tr>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">617.10</td>
<td style="text-align: right;">445.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">715.52</td>
<td style="text-align: right;">639.7</td>
</tr>
<tr class="odd">
<td style="text-align: left;">young</td>
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">575.70</td>
<td style="text-align: right;">467.8</td>
</tr>
<tr class="even">
<td style="text-align: left;">old</td>
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">742.19</td>
<td style="text-align: right;">605.4</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warnung
</div>
</div>
<div class="callout-body-container callout-body">

</div>
</div>
<p>Wo ist <code>rt_naming</code> geblieben? Wir haben es entfernt, weil es ebenfalls einen einzigen Wert pro Wort und Altersgruppe hat. Wenn wir es nicht entfernen, bedeutet das, dass wir die Länge unseres Datensatzes nicht ändern (immer noch eine Zeile pro Wort und Altersgruppe), sondern nur die Breite und die Einführung von <code>NA</code>-Werten für <code>lexdec_young</code> für alte Probanden und <code>NA</code>-Werten für <code>lexdec_old</code> für junge Probanden. Hätten wir sie nicht entfernt, sähen unsere ersten 6 Zeilen wie <a href="#tbl-eng_wider_na">Tabelle&nbsp;<span>9.8</span></a> aus. Vergleichen Sie dies mit der Ausgabe in <a href="#tbl-eng_wide">Tabelle&nbsp;<span>9.6</span></a>, sehen Sie den Unterschied?</p>
<div class="cell">
<div class="cell-output-display">
<div id="tbl-eng_wider_na" class="anchored">
<table class="table table-sm table-striped small" data-quarto-postprocess="true">
<caption>Tabelle&nbsp;9.8: Wider data with missing values</caption>
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">word</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">length_in_letters</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">written_frequency</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">word_category</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">rt_naming</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lexdec_young</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">lexdec_old</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">456.3</td>
<td style="text-align: right;">623.61</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">ace</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">4.219508</td>
<td style="text-align: left;">N</td>
<td style="text-align: right;">607.8</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">775.67</td>
</tr>
<tr class="odd">
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">445.8</td>
<td style="text-align: right;">617.10</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">act</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">8.118207</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">639.7</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">715.52</td>
</tr>
<tr class="odd">
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">467.8</td>
<td style="text-align: right;">575.70</td>
<td style="text-align: right;">NA</td>
</tr>
<tr class="even">
<td style="text-align: left;">add</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">7.319203</td>
<td style="text-align: left;">V</td>
<td style="text-align: right;">605.4</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">742.19</td>
</tr>
</tbody>
</table>
</div>


</div>
</div>
</section>
</section>
<section id="lernziele-1" class="level2 unnumbered unlisted">
<h2 class="unnumbered unlisted anchored" data-anchor-id="lernziele-1">Lernziele 🏁</h2>
<p>In diesem Kapitel haben wir gelernt…</p>
<ul>
<li>über breite versus lange Daten ✅</li>
<li>wie man breite Daten länger macht ✅</li>
<li>wie man lange Daten breiter macht ✅</li>
</ul>
</section>
<section id="hausaufgaben" class="level2" data-number="9.8">
<h2 data-number="9.8" class="anchored" data-anchor-id="hausaufgaben"><span class="header-section-number">9.8</span> Hausaufgaben</h2>
<p>Für diese Aufgaben werden wir mit dem Datensatz <code>df_eng</code> arbeiten.</p>
<ol type="1">
<li><p>Verwenden Sie <code>pivot_wider</code>, um mit <code>rt_naming</code> neue Variablen zu erstellen: <code>naming_old</code> und <code>naming_young</code>, die die Reaktionszeiten beim Benennen für alte bzw. junge Teilnehmer enthalten. Hinweis: Sie müssen <code>rt_lexdec</code> entfernen. Der resultierende Datenrahmen sollte 2284 Beobachtungen und 6 Variablen enthalten.</p></li>
<li><p>Erstellen Sie <a href="#fig-old_young">Abbildung&nbsp;<span>9.5</span></a> neu. Hinweis: Sie benötigen <code>pivot_wider()</code>.</p></li>
</ol>
<div class="cell">
<div class="cell-output-display">
<div id="fig-old_young" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="09-wrangling_2_files/figure-html/fig-old_young-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption class="figure-caption">Abbildung&nbsp;9.5: Scatterplot of lexical decision task response times per word for old versus young participants</figcaption>
</figure>
</div>
</div>
</div>
<ol start="3" type="1">
<li><p>Warum brauchen wir unseren <code>df_eng_wide</code>-Datensatz, um <a href="#fig-old_young">Abbildung&nbsp;<span>9.5</span></a> zu erstellen? Mit anderen Worten, warum ist <code>df_eng_wide</code> die geeignete Struktur, aber nicht <code>df_eng_long</code> für ein solches Streudiagramm?</p></li>
<li><p>Benutze <code>df_eng_long</code> und die Funktion <code>summarise()</code>, die wir im letzten Abschnitt gesehen haben, und reproduziere die folgende Zusammenfassung:</p></li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  response   mean    sd
  &lt;chr&gt;     &lt;dbl&gt; &lt;dbl&gt;
1 rt_lexdec  708.  115.
2 rt_naming  566.  101.</code></pre>
</div>
</div>
<p>Hinweis: Müssen Sie <code>NA</code> entfernen (wir haben im letzten Abschnitt gesehen, wie man das macht)?</p>
</section>
<section id="session-info" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="session-info">Session Info</h2>
<p>Hergestellt mit R version 4.3.0 (2023-04-21) (Already Tomorrow) und RStudioversion 2023.9.0.463 (Desert Sunflower).</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>R version 4.3.0 (2023-04-21)
Platform: aarch64-apple-darwin20 (64-bit)
Running under: macOS Ventura 13.2.1

Matrix products: default
BLAS:   /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRblas.0.dylib 
LAPACK: /Library/Frameworks/R.framework/Versions/4.3-arm64/Resources/lib/libRlapack.dylib;  LAPACK version 3.11.0

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

time zone: Europe/Berlin
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
 [1] janitor_2.2.0   here_1.0.1      lubridate_1.9.2 forcats_1.0.0  
 [5] stringr_1.5.0   dplyr_1.1.3     purrr_1.0.2     readr_2.1.4    
 [9] tidyr_1.3.0     tibble_3.2.1    ggplot2_3.4.3   tidyverse_2.0.0

loaded via a namespace (and not attached):
 [1] utf8_1.2.3        generics_0.1.3    xml2_1.3.4        stringi_1.7.12   
 [5] hms_1.1.3         digest_0.6.33     magrittr_2.0.3    evaluate_0.21    
 [9] grid_4.3.0        timechange_0.2.0  fastmap_1.1.1     rprojroot_2.0.3  
[13] jsonlite_1.8.7    httr_1.4.6        rvest_1.0.3       fansi_1.0.4      
[17] viridisLite_0.4.2 scales_1.2.1      cli_3.6.1         rlang_1.1.1      
[21] crayon_1.5.2      bit64_4.0.5       munsell_0.5.0     withr_2.5.0      
[25] yaml_2.3.7        tools_4.3.0       parallel_4.3.0    tzdb_0.4.0       
[29] colorspace_2.1-0  webshot_0.5.4     pacman_0.5.1      kableExtra_1.3.4 
[33] vctrs_0.6.3       R6_2.5.1          magick_2.7.4      lifecycle_1.0.3  
[37] snakecase_0.11.0  htmlwidgets_1.6.2 bit_4.0.5         vroom_1.6.3      
[41] pkgconfig_2.0.3   pillar_1.9.0      gtable_0.3.4      Rcpp_1.0.11      
[45] glue_1.6.2        systemfonts_1.0.4 highr_0.10        xfun_0.39        
[49] tidyselect_1.2.0  rstudioapi_0.14   knitr_1.44        farver_2.1.1     
[53] htmltools_0.5.5   labeling_0.4.3    svglite_2.1.1     rmarkdown_2.22   
[57] compiler_4.3.0   </code></pre>
</div>
</div>
</section>
<section id="literaturverzeichnis" class="level2 unlisted unnumbered" data-visibility="uncounted">
<h2 class="unlisted unnumbered anchored" data-visibility="uncounted" data-anchor-id="literaturverzeichnis">Literaturverzeichnis</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-custom-style="Bibliography" data-line-spacing="2" role="list" style="display: none">
<div id="ref-nordmann_applied_2022" class="csl-entry" role="listitem">
Nordmann, E., &amp; DeBruine, L. (2022). <em>Applied Data Skills</em>. Zenodo. <a href="https://doi.org/10.5281/zenodo.6365078">https://doi.org/10.5281/zenodo.6365078</a>
</div>
<div id="ref-wickham_r_2023" class="csl-entry" role="listitem">
Wickham, H., Çetinkaya-Rundel, M., &amp; Grolemund, G. (2023). <em>R for <span>Data Science</span></em> (2. Aufl.).
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script>
var custom_title = document.querySelectorAll('.custom .theorem-title');

for (let i = 0; i < custom_title.length; i++ ) {
   var mod_name = custom_title[i].innerHTML;
   custom_title[i].innerHTML = mod_name.replace("Beispiel", "Aufgabe");
};
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="../mats/08-desc_stats.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Deskriptive Statistik</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../mats/10-dataviz_3.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Datenvisualisierung 2</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Quellcode</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb6" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Data Wrangling 2"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> "Datenbereinigung (Data tidying)"</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Daniela Palleschi"</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="an">institute:</span><span class="co"> Humboldt-Universität zu Berlin</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="an">footer:</span><span class="co"> "Woche 9 - Data Wrangling 2" </span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "12/13/2023"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="an">date-format:</span><span class="co"> "ddd [den] DD.MM.YYYY"</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="an">date-modified:</span><span class="co"> last-modified</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a><span class="fu">## Lernziele {.unnumbered}</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>In diesem Kapitel werden wir lernen...</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>über breite versus lange Daten</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>wie man breite Daten länger machen kann</span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>wie man lange Daten breiter macht</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="fu">## Lesungen {.unnumbered}</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>Die **Pflichtlektüre** zur Vorbereitung auf dieses Thema ist <span class="co">[</span><span class="ot">Kapital 6 (Data tidying)</span><span class="co">](https://r4ds.hadley.nz/data-tidy)</span> in @wickham_r_2023.</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a>Eine **ergänzende Lektüre** ist <span class="co">[</span><span class="ot">Kapital 8 (Data tidying)</span><span class="co">](https://psyteachr.github.io/ads-v2/08-tidy.html)</span> in @nordmann_applied_2022.</span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="fu">## Wiederholung {.unnummeriert}</span></span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>Im letzten Kapitel haben wir etwas über deskriptive Statistik gelernt, insbesondere über Maße der zentralen Tendenz (Mittelwert, Median, Modus) und der Streuung (Bereich, Standardabweichung). Wir haben auch gesehen, wie man diese Werte mit Base R (z. B. <span class="in">`mean()`</span>, <span class="in">`sd()`</span>) und der <span class="in">`tidyverse`</span> (z. B. <span class="in">`summarise()`</span>) und nach Gruppen (<span class="in">`summarise(.by = )`</span>) berechnet.</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>In diesem Kapitel werden wir das Konzept der aufgeräumten Daten besprechen und sehen, wie wir unsere Daten organisieren und neu anordnen können, damit sie aufgeräumt sind.</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="fu">## Einrichtung</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>Wir brauchen die Pakete <span class="in">`tidyverse`</span>, <span class="in">`here`</span>, und <span class="in">`janitor`</span>.</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse,</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>               here,</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>               janitor)</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>We'll use the <span class="in">`languageR_english.csv`</span> dataset (in <span class="in">`daten`</span> folder).</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>df_eng <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"daten"</span>, <span class="st">"languageR_english.csv"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(word) <span class="sc">|&gt;</span> </span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">rt_lexdec =</span> r_tlexdec,</span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">rt_naming =</span> r_tnaming</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a><span class="fu">## 'Tidy' Arbeitsablauf</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a>@fig-workflow zeigt einen Überblick über den typischen Data-Science-Prozess, bei dem wir unsere Daten importieren, sie bereinigen und dann einen Zyklus von Umwandlung, Visualisierung und Modellierung durchlaufen, bevor wir schließlich unsere Ergebnisse mitteilen. </span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>::: {.content-visible when-format="revealjs"}</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "70%"</span></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "A model of the data science process from @wickham_r_2023 [(all rights reserved)](https://r4ds.hadley.nz/intro.html)"</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>magick<span class="sc">::</span><span class="fu">image_negate</span>(magick<span class="sc">::</span><span class="fu">image_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"media/Wickham_tidyworkflow.png"</span>)))</span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>::: {.content-hidden when-format="revealjs"}</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "100%"</span></span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-workflow</span></span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "[Image source:](https://r4ds.hadley.nz/intro.html) @wickham_r_2023 (all rights reserved)"</span></span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a>magick<span class="sc">::</span><span class="fu">image_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"media/Wickham_tidyworkflow.png"</span>))</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>Wir haben bereits gesehen, wie wir unsere Daten importieren (<span class="in">`readr::read_csv`</span>), transformieren (Paket <span class="in">`dplyr`</span>) und visualisieren (Paket <span class="in">`ggplot`</span>) können. Aber wir haben bisher nur aufgeräumte Daten gesehen, so dass wir den Schritt "aufräumen" nicht durchführen mussten.</span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a><span class="fu">## 'Tidy' Daten</span></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a>Dieselben Daten können auf verschiedene Weise dargestellt werden. Die folgenden Datensätze zeigen alle dieselben Werte für vier Variablen: Land, Jahr, Bevölkerungszahl und Anzahl der Tuberkulosefälle. Jeder Datensatz ordnet die Werte anders an. Nehmen Sie sich einen Moment Zeit, um die verschiedenen Optionen zu betrachten. Welche ist am einfachsten zu lesen?</span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>::: {.content-visible when-format="revealjs"}</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>:::: columns </span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>::: {.column width="33%"}</span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a><span class="co">#| output-location: fragment</span></span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Tabelle 1</span></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a>df_tb <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"daten"</span>, <span class="st">"table1.csv"</span>))</span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a>df_tb <span class="sc">%&gt;%</span> </span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">20</span></span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a>::: {.column width="33%"}</span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a><span class="co">#| output-location: fragment</span></span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Tabelle 2</span></span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a>df_tb <span class="sc">%&gt;%</span></span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(cases, population),</span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"type"</span>,</span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"count"</span></span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">20</span></span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a>::: {.column width="33%"}</span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a><span class="co">#| output-location: fragment</span></span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Tabelle 3</span></span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a>df_tb <span class="sc">%&gt;%</span></span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a>  <span class="do">## group_by(country,year) %&gt;% </span></span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rate =</span> <span class="fu">paste0</span>(cases,<span class="st">"/"</span>,population)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>cases,<span class="sc">-</span>population) <span class="sc">%&gt;%</span></span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">20</span></span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a>:::: </span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a><span class="co">#| output-location: fragment</span></span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Tabelle 1</span></span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-1</span></span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a>df_tb <span class="sc">%&gt;%</span> </span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">20</span></span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a><span class="co">#| output-location: fragment</span></span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Tabelle 2</span></span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-2</span></span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a>df_tb <span class="sc">%&gt;%</span></span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(cases, population),</span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"type"</span>,</span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"count"</span></span>
<span id="cb6-181"><a href="#cb6-181" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-182"><a href="#cb6-182" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-183"><a href="#cb6-183" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb6-184"><a href="#cb6-184" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">20</span></span>
<span id="cb6-185"><a href="#cb6-185" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-186"><a href="#cb6-186" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-187"><a href="#cb6-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-190"><a href="#cb6-190" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-191"><a href="#cb6-191" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-192"><a href="#cb6-192" aria-hidden="true" tabindex="-1"></a><span class="co">#| output-location: fragment</span></span>
<span id="cb6-193"><a href="#cb6-193" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Tabelle 3</span></span>
<span id="cb6-194"><a href="#cb6-194" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-3</span></span>
<span id="cb6-195"><a href="#cb6-195" aria-hidden="true" tabindex="-1"></a>df_tb <span class="sc">%&gt;%</span></span>
<span id="cb6-196"><a href="#cb6-196" aria-hidden="true" tabindex="-1"></a>  <span class="do">## group_by(country,year) %&gt;% </span></span>
<span id="cb6-197"><a href="#cb6-197" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rate =</span> <span class="fu">paste0</span>(cases,<span class="st">"/"</span>,population)) <span class="sc">%&gt;%</span> </span>
<span id="cb6-198"><a href="#cb6-198" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>cases,<span class="sc">-</span>population) <span class="sc">%&gt;%</span></span>
<span id="cb6-199"><a href="#cb6-199" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-200"><a href="#cb6-200" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb6-201"><a href="#cb6-201" aria-hidden="true" tabindex="-1"></a>    <span class="at">font_size =</span> <span class="dv">20</span>,</span>
<span id="cb6-202"><a href="#cb6-202" aria-hidden="true" tabindex="-1"></a>    <span class="at">full_width =</span> F</span>
<span id="cb6-203"><a href="#cb6-203" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-204"><a href="#cb6-204" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-205"><a href="#cb6-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-206"><a href="#cb6-206" aria-hidden="true" tabindex="-1"></a>Wahrscheinlich ist @tbl-1 für Sie am einfachsten zu lesen. Das liegt daran, dass sie den drei Regeln für aufgeräumte Daten folgt (visualisiert in @fig-tidy):</span>
<span id="cb6-207"><a href="#cb6-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Jede Variable ist eine Spalte, jede Spalte ist eine Variable</span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Jede Beobachtung ist eine Zeile, jede Zeile ist eine Beobachtung</span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Jeder Wert ist eine Zelle, jede Zelle ist ein Einzelwert</span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a><span class="co">#| out-width: "90%"</span></span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-tidy</span></span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-align: center</span></span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: "[Image source:](https://r4ds.hadley.nz/data-tidy.html) @wickham_r_2023 (all rights reserved)"</span></span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a>magick<span class="sc">::</span><span class="fu">image_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"media/Wickham_tidydata.png"</span>))</span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a>In @tbl-1 steht jede Spalte für eine Variable: <span class="in">`country`</span>, <span class="in">`year`</span>, <span class="in">`population`</span> und <span class="in">`case`</span>. Jede Zeile steht für eine einzelne Beobachtung: ein Land in einem bestimmten Jahr. Und schließlich enthält jede Zelle einen einzigen Wert.</span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a><span class="fu">### Warum 'tidy' Daten?</span></span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; "**Glückliche Familien** sind alle gleich; jede **unglückliche Familie** ist auf ihre eigene Art unglücklich."</span></span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a><span class="at">--- Leo Tolstoy</span></span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; "**Saubere Datensätze** sind alle gleich, aber jeder **unordentliche Datensatz** ist auf seine eigene Weise unordentlich."</span></span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a><span class="at">--- Hadley Wickham</span></span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a>Wenn Sie erst einmal 'tidy' Daten haben, verbringen Sie weniger Zeit mit dem Versuch, Ihre Daten in die richtige Form zu bringen, um das zu tun, was Sie wollen. Das Aufräumen von Daten erfordert im Vorfeld etwas Arbeit, ist aber langfristig gesehen hilfreich.</span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a>Die Arbeit mit aufgeräumten Daten hat zwei wesentliche Vorteile:</span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Die Arbeit mit einer einheitlichen Datenstruktur ermöglicht es uns, Konventionen zu übernehmen.</span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a><span class="ss">    + </span>Da aufgeräumte Daten die allgemein vereinbarte Datenstruktur sind, basieren die Konventionen auf der Annahme dieser Struktur.</span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a><span class="ss">    + </span>so haben die Werkzeuge eine zugrunde liegende Einheitlichkeit</span>
<span id="cb6-240"><a href="#cb6-240" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Die vektorisierte Natur von R kann glänzen</span>
<span id="cb6-241"><a href="#cb6-241" aria-hidden="true" tabindex="-1"></a><span class="ss">    + </span>die meisten eingebauten R-Funktionen arbeiten mit *Vektorwerten* (und Spalten sind im Wesentlichen Vektoren)</span>
<span id="cb6-242"><a href="#cb6-242" aria-hidden="true" tabindex="-1"></a><span class="ss">    + </span>Alle Pakete im <span class="in">`tidyverse`</span> sind darauf ausgelegt, mit aufgeräumten Daten zu arbeiten (z.B. <span class="in">`ggplot2`</span> und <span class="in">`dplyr`</span>)</span>
<span id="cb6-243"><a href="#cb6-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-244"><a href="#cb6-244" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb6-245"><a href="#cb6-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-246"><a href="#cb6-246" aria-hidden="true" tabindex="-1"></a><span class="fu">### Rückblick: Vektoren</span></span>
<span id="cb6-247"><a href="#cb6-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-248"><a href="#cb6-248" aria-hidden="true" tabindex="-1"></a>Vektoren sind der grundlegendste Datenobjekttyp in R. Ein Vektor enthält Daten desselben Typs und ist im Wesentlichen eine Liste. Sie können einen Vektor z.B. mit der Funktion <span class="in">`c()`</span> erzeugen.</span>
<span id="cb6-249"><a href="#cb6-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-252"><a href="#cb6-252" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-253"><a href="#cb6-253" aria-hidden="true" tabindex="-1"></a>vector1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">7</span>)</span>
<span id="cb6-254"><a href="#cb6-254" aria-hidden="true" tabindex="-1"></a>vector2 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="st">"x"</span>)</span>
<span id="cb6-255"><a href="#cb6-255" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-256"><a href="#cb6-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-257"><a href="#cb6-257" aria-hidden="true" tabindex="-1"></a><span class="in">`Vektor1`</span> enthält numerische Werte, da alle Elemente Zahlen sind. <span class="in">`vector2`</span> wird alle Zeichenwerte (d.h. Text) enthalten, da es ein einziges eindeutiges Zeichenelement (<span class="in">`"x"`</span>) gibt. R liest also alle Elemente als Zeichentyp. Wir können einen Datenrahmen aus Vektoren gleicher Länge erstellen, indem wir z. B. die Funktion <span class="in">`tibble()`</span> verwenden.</span>
<span id="cb6-258"><a href="#cb6-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-261"><a href="#cb6-261" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-262"><a href="#cb6-262" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(vector1,vector2)</span>
<span id="cb6-263"><a href="#cb6-263" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-264"><a href="#cb6-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-265"><a href="#cb6-265" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-266"><a href="#cb6-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-267"><a href="#cb6-267" aria-hidden="true" tabindex="-1"></a>Die meisten Daten "in freier Wildbahn" sind unordentlich. Die Daten werden oft zunächst für ein anderes Ziel als die Analyse organisiert. Dieses Ziel ist in der Regel die Erleichterung der Dateneingabe: Wir wollen unsere Beobachtungen zunächst einfach dokumentieren können. Die meisten Menschen sind mit den Grundsätzen ordentlicher Daten nicht vertraut, und erst wenn sie *viel* Zeit mit Daten verbringen, wird klar, warum ordentliche Daten notwendig sind. Das bedeutet, dass die meisten *echten* Analysen zumindest ein gewisses Maß an Aufräumen erfordern.</span>
<span id="cb6-268"><a href="#cb6-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-269"><a href="#cb6-269" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb6-270"><a href="#cb6-270" aria-hidden="true" tabindex="-1"></a><span class="fu">#### [Aufgabe @exm-tidy]: Tidy data</span></span>
<span id="cb6-271"><a href="#cb6-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-272"><a href="#cb6-272" aria-hidden="true" tabindex="-1"></a>::: {#exm-tidy .custom}</span>
<span id="cb6-273"><a href="#cb6-273" aria-hidden="true" tabindex="-1"></a>::: nonincremental</span>
<span id="cb6-274"><a href="#cb6-274" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>Gehen Sie zurück zu den Tabellen 1-3. Beschreiben Sie für jede Tabelle, was jede Beobachtung und jede Spalte darstellt.</span>
<span id="cb6-275"><a href="#cb6-275" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>Skizzieren Sie das Verfahren, mit dem Sie die Rate für <span class="in">`table1`</span>. berechnen würden. Sie brauchen nur ein Verb, das:</span>
<span id="cb6-276"><a href="#cb6-276" aria-hidden="true" tabindex="-1"></a><span class="ss">    + </span>eine neue Variable erzeugt (nennen Sie sie <span class="in">`rate`</span>), die Folgendes enthält:</span>
<span id="cb6-277"><a href="#cb6-277" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>die Anzahl der TB-Fälle (<span class="in">`cases`</span>) pro Land und Jahr, geteilt durch</span>
<span id="cb6-278"><a href="#cb6-278" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>die entsprechende Bevölkerung (<span class="in">`population`</span>) pro Land und Jahr, </span>
<span id="cb6-279"><a href="#cb6-279" aria-hidden="true" tabindex="-1"></a><span class="ss">      + </span>multipliziert mit <span class="in">`10000`</span></span>
<span id="cb6-280"><a href="#cb6-280" aria-hidden="true" tabindex="-1"></a><span class="ss">    + </span>Hinweis: Welches <span class="in">`dplyr`</span>-Verb erzeugt neue Variablen? (Sehen Sie sich das @sec-data-transform an.)</span>
<span id="cb6-281"><a href="#cb6-281" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>Schauen Sie die @tbl-2 und @tbl-3 an. Wäre es so einfach gewesen, die <span class="in">`rate`</span> mit diesen Datenstrukturen zu berechnen?</span>
<span id="cb6-282"><a href="#cb6-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-283"><a href="#cb6-283" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-284"><a href="#cb6-284" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-285"><a href="#cb6-285" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-286"><a href="#cb6-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-287"><a href="#cb6-287" aria-hidden="true" tabindex="-1"></a><span class="fu">## Datenbereinigung</span></span>
<span id="cb6-288"><a href="#cb6-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-289"><a href="#cb6-289" aria-hidden="true" tabindex="-1"></a>Die Datenbereinigung besteht im Wesentlichen aus der Umwandlung breiter Daten in lange Daten und langer Daten in breite Daten (neben anderen Schritten). Das Ergebnis sind aufgeräumte Daten, bei denen jede Spalte eine Variable und jede Zeile eine Beobachtung darstellt. Wie genau wir eine Beobachtung definieren, hängt davon ab, was genau wir erreichen wollen, und kann sich von einem Analyseschritt zum anderen ändern.</span>
<span id="cb6-290"><a href="#cb6-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-291"><a href="#cb6-291" aria-hidden="true" tabindex="-1"></a><span class="fu">### Datenaufräumung mit dem `tidyverse`</span></span>
<span id="cb6-292"><a href="#cb6-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-293"><a href="#cb6-293" aria-hidden="true" tabindex="-1"></a>Das Paket <span class="in">`tidyr`</span> aus <span class="in">`tidyverse`</span> hat zwei nützliche Funktionen zum Transponieren unserer Daten: </span>
<span id="cb6-294"><a href="#cb6-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-295"><a href="#cb6-295" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span><span class="in">`pivot_longer()`</span>: macht breite Daten länger</span>
<span id="cb6-296"><a href="#cb6-296" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span><span class="in">`pivot_wider()`</span>: lange Daten breiter machen</span>
<span id="cb6-297"><a href="#cb6-297" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-298"><a href="#cb6-298" aria-hidden="true" tabindex="-1"></a>Oft müssen wir zwischen diesen Formaten konvertieren, um verschiedene Arten von Zusammenfassungen oder Visualisierungen zu erstellen. Aber was genau sind breite und lange Daten?</span>
<span id="cb6-299"><a href="#cb6-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-300"><a href="#cb6-300" aria-hidden="true" tabindex="-1"></a>::: {.content-hidden when-format="pdf"}</span>
<span id="cb6-301"><a href="#cb6-301" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = F, fig.align = "center", out.width="100%"}</span></span>
<span id="cb6-302"><a href="#cb6-302" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap-location: bottom</span></span>
<span id="cb6-303"><a href="#cb6-303" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-pivot-html</span></span>
<span id="cb6-304"><a href="#cb6-304" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: die berühmteste Verwendung des Wortes Pivot (zumindest für Millenials) ([Friends](https://www.youtube.com/watch?v=8w3wmQAMoxQ))</span></span>
<span id="cb6-305"><a href="#cb6-305" aria-hidden="true" tabindex="-1"></a>magick<span class="sc">::</span><span class="fu">image_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"media/pivot_friends.jpeg"</span>))</span>
<span id="cb6-306"><a href="#cb6-306" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-307"><a href="#cb6-307" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-308"><a href="#cb6-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-309"><a href="#cb6-309" aria-hidden="true" tabindex="-1"></a>::: {.content-visible when-format="pdf"}</span>
<span id="cb6-310"><a href="#cb6-310" aria-hidden="true" tabindex="-1"></a><span class="in">```{r echo = F, fig.align = "center", out.width="50%"}</span></span>
<span id="cb6-311"><a href="#cb6-311" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap-location: bottom</span></span>
<span id="cb6-312"><a href="#cb6-312" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-pivot-pdf</span></span>
<span id="cb6-313"><a href="#cb6-313" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: die berühmteste Verwendung des Wortes Pivot (zumindest für Millenials)</span></span>
<span id="cb6-314"><a href="#cb6-314" aria-hidden="true" tabindex="-1"></a>magick<span class="sc">::</span><span class="fu">image_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"media/pivot_friends.jpeg"</span>))</span>
<span id="cb6-315"><a href="#cb6-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-316"><a href="#cb6-316" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-317"><a href="#cb6-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-318"><a href="#cb6-318" aria-hidden="true" tabindex="-1"></a><span class="fu">### Breite versus lange Daten</span></span>
<span id="cb6-319"><a href="#cb6-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-320"><a href="#cb6-320" aria-hidden="true" tabindex="-1"></a>Bei breiten Daten befinden sich alle Beobachtungen zu einer Sache in derselben Zeile. Breite Daten sind *normalerweise* nicht aufgeräumt. Bei langen Daten befindet sich jede Beobachtung in einer eigenen Zeile. Lange Daten sind *normalerweise* aufgeräumt. Beginnen wir mit dem typischsten Fall: der Umwandlung breiter Daten in lange Daten.</span>
<span id="cb6-321"><a href="#cb6-321" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb6-322"><a href="#cb6-322" aria-hidden="true" tabindex="-1"></a><span class="fu">## Verlängern von Daten: `df_eng`</span></span>
<span id="cb6-323"><a href="#cb6-323" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-324"><a href="#cb6-324" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>im Datensatz <span class="in">`languageR_english.csv`</span></span>
<span id="cb6-325"><a href="#cb6-325" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>jede Zeile ist eine Beobachtung</span>
<span id="cb6-326"><a href="#cb6-326" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>die erste Spalte beschreibt die Altersgruppe des Teilnehmers</span>
<span id="cb6-327"><a href="#cb6-327" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>die Spalten <span class="in">`word`</span>, <span class="in">`length_in_letters`</span>, <span class="in">`written_frequency`</span> und <span class="in">`word_category`</span> beschreiben Eigenschaften des Stimulus für eine bestimmte Beobachtung (d. h. das Wort)</span>
<span id="cb6-328"><a href="#cb6-328" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>wir haben <span class="in">`r nrow(df_eng)`</span> Beobachtungen</span>
<span id="cb6-329"><a href="#cb6-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-332"><a href="#cb6-332" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-333"><a href="#cb6-333" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-df_eng</span></span>
<span id="cb6-334"><a href="#cb6-334" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: df_eng</span></span>
<span id="cb6-335"><a href="#cb6-335" aria-hidden="true" tabindex="-1"></a>df_eng <span class="sc">%&gt;%</span> </span>
<span id="cb6-336"><a href="#cb6-336" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-337"><a href="#cb6-337" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-338"><a href="#cb6-338" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>()</span>
<span id="cb6-339"><a href="#cb6-339" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-340"><a href="#cb6-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-341"><a href="#cb6-341" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Sind diese Daten in @tbl-df_eng aufgeräumt?</span>
<span id="cb6-342"><a href="#cb6-342" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Sind diese Daten zu breit oder zu lang?</span>
<span id="cb6-343"><a href="#cb6-343" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Wie können wir diese Daten länger machen?</span>
<span id="cb6-344"><a href="#cb6-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-345"><a href="#cb6-345" aria-hidden="true" tabindex="-1"></a>Ob wir diese Daten verlängern wollen oder nicht, hängt von der jeweiligen Aufgabe ab. Wenn wir die Antwortzeiten für die lexikalische Entscheidungsaufgabe (<span class="in">`rt_lexdec`</span>) zusammen mit der Antwortzeit für die Benennungsaufgabe (<span class="in">`rt_naming`</span>) aufzeichnen wollen, könnten wir die beiden in <span class="in">`facet_wrap()`</span> einschließen. Allerdings nimmt <span class="in">`facet_wrap()`</span> eine *kategorische* Variable als Argument und erzeugt Diagramme für jede Kategorie. Wir bräuchten eine neue Variable, zum Beispiel <span class="in">`response`</span>, die die Stufen <span class="in">`lexdec`</span> und <span class="in">`naming`</span> enthält, und eine weitere, zum Beispiel <span class="in">`time`</span>, die die Antwortzeit enthält. Versuchen wir das mal.</span>
<span id="cb6-346"><a href="#cb6-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-347"><a href="#cb6-347" aria-hidden="true" tabindex="-1"></a><span class="fu">### `pivot_longer()`</span></span>
<span id="cb6-348"><a href="#cb6-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-349"><a href="#cb6-349" aria-hidden="true" tabindex="-1"></a>Die Funktion <span class="in">`tidyr`</span> <span class="in">`pivot_longer()`</span> konvertiert eine breite Datentabelle in ein längeres Format, indem sie die Überschriften der angegebenen Spalten in die Werte neuer Spalten umwandelt und die Werte dieser Spalten zu einer neuen, zusammengefassten Spalte kombiniert.</span>
<span id="cb6-350"><a href="#cb6-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-353"><a href="#cb6-353" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-354"><a href="#cb6-354" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb6-355"><a href="#cb6-355" aria-hidden="true" tabindex="-1"></a>df_eng_long <span class="ot">&lt;-</span> </span>
<span id="cb6-356"><a href="#cb6-356" aria-hidden="true" tabindex="-1"></a>  df_eng <span class="sc">%&gt;%</span> </span>
<span id="cb6-357"><a href="#cb6-357" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb6-358"><a href="#cb6-358" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"rt_"</span>), </span>
<span id="cb6-359"><a href="#cb6-359" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"response"</span>, </span>
<span id="cb6-360"><a href="#cb6-360" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"time"</span></span>
<span id="cb6-361"><a href="#cb6-361" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-362"><a href="#cb6-362" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-363"><a href="#cb6-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-364"><a href="#cb6-364" aria-hidden="true" tabindex="-1"></a>Die Ausgabe der ersten 12 Zeilen (nach einigen zusätzlichen Formatierungen, um eine hübsche Tabelle zu erstellen) sollte wie @tbl-longer aussehen.</span>
<span id="cb6-365"><a href="#cb6-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-368"><a href="#cb6-368" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-369"><a href="#cb6-369" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: true</span></span>
<span id="cb6-370"><a href="#cb6-370" aria-hidden="true" tabindex="-1"></a><span class="co">#| output-location: column-fragment</span></span>
<span id="cb6-371"><a href="#cb6-371" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-longer</span></span>
<span id="cb6-372"><a href="#cb6-372" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: A pivoted version of `df_billboard` (first 10 rows)</span></span>
<span id="cb6-373"><a href="#cb6-373" aria-hidden="true" tabindex="-1"></a>df_eng_long <span class="sc">%&gt;%</span> </span>
<span id="cb6-374"><a href="#cb6-374" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb6-375"><a href="#cb6-375" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-376"><a href="#cb6-376" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">20</span>)</span>
<span id="cb6-377"><a href="#cb6-377" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-378"><a href="#cb6-378" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-379"><a href="#cb6-379" aria-hidden="true" tabindex="-1"></a>Nehmen wir uns einen Moment Zeit, um die Werte in @tbl-longer mit denen der ersten 6 Zeilen in <span class="in">`df_eng`</span> zu vergleichen, die in @tbl-df_eng angegeben sind. Vergleichen Sie die Werte in der <span class="in">`df_eng`</span>-Variablen <span class="in">`rt_lexdec`</span> (@tbl-df_eng) mit den <span class="in">`time`</span>-Werten, wenn <span class="in">`response`</span> <span class="in">`rt_lexdec`</span> (@tbl-longer) ist: Sie sind identisch. Was ist nun mit <span class="in">`rt_naming`</span> sowohl in @tbl-df_eng als auch in @tbl-longer? Sie sind ebenfalls identisch. Dies ist eine wichtige Erkenntnis: Wir haben keine Daten oder Beobachtungswerte geändert, sondern lediglich die Organisation der Datenpunkte neu strukturiert.</span>
<span id="cb6-380"><a href="#cb6-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-381"><a href="#cb6-381" aria-hidden="true" tabindex="-1"></a>Wie hat <span class="in">`pivot_longer()`</span> das gemacht? Hier ist eine Aufschlüsselung der Argumente, die <span class="in">`pivot_longer()`</span> benötigt (die Sie auch durch Ausführen von <span class="in">`?pivot_longer`</span> in der Konsole untersuchen können):</span>
<span id="cb6-382"><a href="#cb6-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-383"><a href="#cb6-383" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`col = `</span> gibt an, welche Spalten gepivotet werden müssen (sollte eine kategorische Variable sein)</span>
<span id="cb6-384"><a href="#cb6-384" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>nimmt die gleiche Syntax wie <span class="in">`select()`</span>, also könnten wir z.B. <span class="in">`starts_with("")`</span> verwenden</span>
<span id="cb6-385"><a href="#cb6-385" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`names_to =`</span> benennt die Variable, die in den aktuellen Spaltennamen gespeichert ist, hier ist es <span class="in">`response`</span></span>
<span id="cb6-386"><a href="#cb6-386" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span><span class="in">`values_to =`</span> benennt die in den Zellwerten gespeicherte Variable, die wir <span class="in">`time`</span> nennen</span>
<span id="cb6-387"><a href="#cb6-387" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>N.B., wir mussten <span class="in">`response`</span> und <span class="in">`time`</span> in Anführungszeichen setzen, weil sie *noch* keine Variablennamen sind.</span>
<span id="cb6-388"><a href="#cb6-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-389"><a href="#cb6-389" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Plotten unserer 'tidy' Daten</span></span>
<span id="cb6-390"><a href="#cb6-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-391"><a href="#cb6-391" aria-hidden="true" tabindex="-1"></a>Da wir nun die <span class="in">`response`</span>-Daten in einer Variable und die <span class="in">`time`</span>-Daten in einer anderen Variable haben, wollen wir versuchen, ein Diagramm zu erstellen, in dem wir <span class="in">`age_subject`</span> auf der x-Achse, <span class="in">`time`</span> auf der y-Achse und <span class="in">`response`</span> auf der y-Achse haben. </span>
<span id="cb6-392"><a href="#cb6-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-395"><a href="#cb6-395" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-396"><a href="#cb6-396" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-397"><a href="#cb6-397" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-eng</span></span>
<span id="cb6-398"><a href="#cb6-398" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: Response times per age group for the lexical decision task vs. naming task</span></span>
<span id="cb6-399"><a href="#cb6-399" aria-hidden="true" tabindex="-1"></a>df_eng_long <span class="sc">%&gt;%</span> </span>
<span id="cb6-400"><a href="#cb6-400" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-401"><a href="#cb6-401" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> age_subject, </span>
<span id="cb6-402"><a href="#cb6-402" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> time, </span>
<span id="cb6-403"><a href="#cb6-403" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> age_subject, </span>
<span id="cb6-404"><a href="#cb6-404" aria-hidden="true" tabindex="-1"></a>      <span class="at">shape =</span> age_subject) <span class="sc">+</span></span>
<span id="cb6-405"><a href="#cb6-405" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>response) <span class="sc">+</span></span>
<span id="cb6-406"><a href="#cb6-406" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Response time by task and age group"</span>,</span>
<span id="cb6-407"><a href="#cb6-407" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Age group"</span>, </span>
<span id="cb6-408"><a href="#cb6-408" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Response time (ms)"</span>) <span class="sc">+</span></span>
<span id="cb6-409"><a href="#cb6-409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.4</span>, <span class="at">position =</span> <span class="fu">position_jitter</span>(<span class="fl">0.2</span>)) <span class="sc">+</span></span>
<span id="cb6-410"><a href="#cb6-410" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb6-411"><a href="#cb6-411" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb6-412"><a href="#cb6-412" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-413"><a href="#cb6-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-414"><a href="#cb6-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-415"><a href="#cb6-415" aria-hidden="true" tabindex="-1"></a>::: callout-tip</span>
<span id="cb6-416"><a href="#cb6-416" aria-hidden="true" tabindex="-1"></a><span class="fu">#### [Aufgabe @exm-tidy]: Tidy data</span></span>
<span id="cb6-417"><a href="#cb6-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-418"><a href="#cb6-418" aria-hidden="true" tabindex="-1"></a>::: {#exm-help .custom}</span>
<span id="cb6-419"><a href="#cb6-419" aria-hidden="true" tabindex="-1"></a>::: nonincremental</span>
<span id="cb6-420"><a href="#cb6-420" aria-hidden="true" tabindex="-1"></a>@fig-eng neu erstellen.</span>
<span id="cb6-421"><a href="#cb6-421" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-422"><a href="#cb6-422" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-423"><a href="#cb6-423" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-424"><a href="#cb6-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-425"><a href="#cb6-425" aria-hidden="true" tabindex="-1"></a><span class="fu">## Verbreiterung der Daten: `df_eng`</span></span>
<span id="cb6-426"><a href="#cb6-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-427"><a href="#cb6-427" aria-hidden="true" tabindex="-1"></a>Die <span class="in">`tidyr`</span>-Funktion <span class="in">`pivot_wider()`</span> macht Datensätze *breiter*, indem sie Spalten vergrößert und Zeilen verkleinert. Dies ist hilfreich, wenn eine Beobachtung über mehrere Zeilen verteilt ist. Obwohl diese Art von Daten in der freien Wildbahn nicht sehr häufig vorkommt, ist sie zum Beispiel bei Regierungsdaten ziemlich verbreitet.</span>
<span id="cb6-428"><a href="#cb6-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-429"><a href="#cb6-429" aria-hidden="true" tabindex="-1"></a>Wir können wieder mit <span class="in">`df_eng`</span> beginnen, um die Daten zu erweitern. Zum Beispiel könnten wir eine einzelne Zeile pro *Wort* haben, die eine einzelne Variable für die Antwort des "jungen" Probanden und die Antwort des "alten" Probanden enthält.</span>
<span id="cb6-430"><a href="#cb6-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-431"><a href="#cb6-431" aria-hidden="true" tabindex="-1"></a><span class="fu">### `pivot_wider()`</span></span>
<span id="cb6-432"><a href="#cb6-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-433"><a href="#cb6-433" aria-hidden="true" tabindex="-1"></a>Pivot wider nimmt ähnliche Argumente wie <span class="in">`pivot_longer()`</span>, mit einigen leichten Unterschieden (z.B. <span class="in">`?pivot_wider`</span>):</span>
<span id="cb6-434"><a href="#cb6-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-435"><a href="#cb6-435" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span><span class="in">`id_cols`</span>: identifizierende Spalten (welche Spalten identifizieren jede Beobachtung eindeutig?)</span>
<span id="cb6-436"><a href="#cb6-436" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span><span class="in">`names_from`</span>: wie soll die neue Spalte heißen, die die vorherigen Spaltennamen enthält (muss eine kategorische Variable sein)? </span>
<span id="cb6-437"><a href="#cb6-437" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span><span class="in">`names_prefix`</span>: Präfix für die neuen Spaltennamen (optional)</span>
<span id="cb6-438"><a href="#cb6-438" aria-hidden="true" tabindex="-1"></a><span class="ss">  + </span>Werte_von`: neue Spaltenwerte</span>
<span id="cb6-439"><a href="#cb6-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-440"><a href="#cb6-440" aria-hidden="true" tabindex="-1"></a>Erstellen wir zwei neue Variablen, die ihre Namen von <span class="in">`age_subject`</span> und ihre Werte von <span class="in">`rt_lexdec`</span> übernehmen. Das Ergebnis sollte wie @tbl-eng_wider aussehen.</span>
<span id="cb6-441"><a href="#cb6-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-444"><a href="#cb6-444" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-445"><a href="#cb6-445" aria-hidden="true" tabindex="-1"></a><span class="co">#| code-fold: true</span></span>
<span id="cb6-446"><a href="#cb6-446" aria-hidden="true" tabindex="-1"></a>df_eng_wide <span class="ot">&lt;-</span></span>
<span id="cb6-447"><a href="#cb6-447" aria-hidden="true" tabindex="-1"></a>  df_eng <span class="sc">%&gt;%</span>  </span>
<span id="cb6-448"><a href="#cb6-448" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rt_naming) <span class="sc">|&gt;</span></span>
<span id="cb6-449"><a href="#cb6-449" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb6-450"><a href="#cb6-450" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> age_subject,</span>
<span id="cb6-451"><a href="#cb6-451" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> rt_lexdec,</span>
<span id="cb6-452"><a href="#cb6-452" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">"lexdec_"</span></span>
<span id="cb6-453"><a href="#cb6-453" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-454"><a href="#cb6-454" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-455"><a href="#cb6-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-456"><a href="#cb6-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-459"><a href="#cb6-459" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-460"><a href="#cb6-460" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-461"><a href="#cb6-461" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb6-462"><a href="#cb6-462" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-eng_wide</span></span>
<span id="cb6-463"><a href="#cb6-463" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Wider `df_eng` data </span></span>
<span id="cb6-464"><a href="#cb6-464" aria-hidden="true" tabindex="-1"></a>df_eng <span class="sc">%&gt;%</span>  </span>
<span id="cb6-465"><a href="#cb6-465" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>rt_naming) <span class="sc">|&gt;</span></span>
<span id="cb6-466"><a href="#cb6-466" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb6-467"><a href="#cb6-467" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> age_subject,</span>
<span id="cb6-468"><a href="#cb6-468" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> rt_lexdec,</span>
<span id="cb6-469"><a href="#cb6-469" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">"lexdec_"</span></span>
<span id="cb6-470"><a href="#cb6-470" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb6-471"><a href="#cb6-471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-472"><a href="#cb6-472" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-473"><a href="#cb6-473" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">20</span>)</span>
<span id="cb6-474"><a href="#cb6-474" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-475"><a href="#cb6-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-476"><a href="#cb6-476" aria-hidden="true" tabindex="-1"></a>@tbl-df_eng-2 zeigt wieder die ersten 6 Zeilen des Originaldatensatzes. Wie werden die Daten aus @tbl-eng_wide in @tbl-df_eng-2 dargestellt?</span>
<span id="cb6-477"><a href="#cb6-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-480"><a href="#cb6-480" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-481"><a href="#cb6-481" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-482"><a href="#cb6-482" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-df_eng-2 </span></span>
<span id="cb6-483"><a href="#cb6-483" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: head(df_eng, n = 6)</span></span>
<span id="cb6-484"><a href="#cb6-484" aria-hidden="true" tabindex="-1"></a>df_eng <span class="sc">%&gt;%</span> </span>
<span id="cb6-485"><a href="#cb6-485" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-486"><a href="#cb6-486" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-487"><a href="#cb6-487" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>()</span>
<span id="cb6-488"><a href="#cb6-488" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-489"><a href="#cb6-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-490"><a href="#cb6-490" aria-hidden="true" tabindex="-1"></a>::: {.content-hidden when-format="pdf"}</span>
<span id="cb6-491"><a href="#cb6-491" aria-hidden="true" tabindex="-1"></a>::: callout-warning</span>
<span id="cb6-492"><a href="#cb6-492" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-493"><a href="#cb6-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-494"><a href="#cb6-494" aria-hidden="true" tabindex="-1"></a>Wo ist <span class="in">`rt_naming`</span> geblieben? Wir haben es entfernt, weil es ebenfalls einen einzigen Wert pro Wort und Altersgruppe hat. Wenn wir es nicht entfernen, bedeutet das, dass wir die Länge unseres Datensatzes nicht ändern (immer noch eine Zeile pro Wort und Altersgruppe), sondern nur die Breite und die Einführung von <span class="in">`NA`</span>-Werten für <span class="in">`lexdec_young`</span> für alte Probanden und <span class="in">`NA`</span>-Werten für <span class="in">`lexdec_old`</span> für junge Probanden.  Hätten wir sie nicht entfernt, sähen unsere ersten 6 Zeilen wie @tbl-eng_wider_na aus. Vergleichen Sie dies mit der Ausgabe in @tbl-eng_wide, sehen Sie den Unterschied?</span>
<span id="cb6-495"><a href="#cb6-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-498"><a href="#cb6-498" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-499"><a href="#cb6-499" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-500"><a href="#cb6-500" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb6-501"><a href="#cb6-501" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: tbl-eng_wider_na</span></span>
<span id="cb6-502"><a href="#cb6-502" aria-hidden="true" tabindex="-1"></a><span class="co">#| tbl-cap: Wider data with missing values</span></span>
<span id="cb6-503"><a href="#cb6-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-504"><a href="#cb6-504" aria-hidden="true" tabindex="-1"></a>df_eng <span class="sc">%&gt;%</span></span>
<span id="cb6-505"><a href="#cb6-505" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb6-506"><a href="#cb6-506" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> age_subject,</span>
<span id="cb6-507"><a href="#cb6-507" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> rt_lexdec,</span>
<span id="cb6-508"><a href="#cb6-508" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_prefix =</span> <span class="st">"lexdec_"</span></span>
<span id="cb6-509"><a href="#cb6-509" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> </span>
<span id="cb6-510"><a href="#cb6-510" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-511"><a href="#cb6-511" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb6-512"><a href="#cb6-512" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">font_size =</span> <span class="dv">20</span>)</span>
<span id="cb6-513"><a href="#cb6-513" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-514"><a href="#cb6-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-515"><a href="#cb6-515" aria-hidden="true" tabindex="-1"></a>::: {.content-hidden when-format="pdf"}</span>
<span id="cb6-516"><a href="#cb6-516" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-517"><a href="#cb6-517" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb6-518"><a href="#cb6-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-519"><a href="#cb6-519" aria-hidden="true" tabindex="-1"></a><span class="fu">## Lernziele 🏁 {.unnumbered .unlisted}</span></span>
<span id="cb6-520"><a href="#cb6-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-521"><a href="#cb6-521" aria-hidden="true" tabindex="-1"></a>In diesem Kapitel haben wir gelernt...</span>
<span id="cb6-522"><a href="#cb6-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-523"><a href="#cb6-523" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>über breite versus lange Daten ✅</span>
<span id="cb6-524"><a href="#cb6-524" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>wie man breite Daten länger macht ✅</span>
<span id="cb6-525"><a href="#cb6-525" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>wie man lange Daten breiter macht ✅</span>
<span id="cb6-526"><a href="#cb6-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-527"><a href="#cb6-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-528"><a href="#cb6-528" aria-hidden="true" tabindex="-1"></a><span class="fu">## Hausaufgaben</span></span>
<span id="cb6-529"><a href="#cb6-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-530"><a href="#cb6-530" aria-hidden="true" tabindex="-1"></a>Für diese Aufgaben werden wir mit dem Datensatz <span class="in">`df_eng`</span> arbeiten.</span>
<span id="cb6-531"><a href="#cb6-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-532"><a href="#cb6-532" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Verwenden Sie <span class="in">`pivot_wider`</span>, um mit <span class="in">`rt_naming`</span> neue Variablen zu erstellen: <span class="in">`naming_old`</span> und <span class="in">`naming_young`</span>, die die Reaktionszeiten beim Benennen für alte bzw. junge Teilnehmer enthalten. Hinweis: Sie müssen <span class="in">`rt_lexdec`</span> entfernen. Der resultierende Datenrahmen sollte 2284 Beobachtungen und 6 Variablen enthalten.</span>
<span id="cb6-533"><a href="#cb6-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-534"><a href="#cb6-534" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Erstellen Sie @fig-old_young neu. Hinweis: Sie benötigen <span class="in">`pivot_wider()`</span>. </span>
<span id="cb6-535"><a href="#cb6-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-538"><a href="#cb6-538" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-539"><a href="#cb6-539" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-540"><a href="#cb6-540" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: true</span></span>
<span id="cb6-541"><a href="#cb6-541" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: fig-old_young</span></span>
<span id="cb6-542"><a href="#cb6-542" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-cap: Scatterplot of lexical decision task response times per word for old versus young participants</span></span>
<span id="cb6-543"><a href="#cb6-543" aria-hidden="true" tabindex="-1"></a>df_eng_wide <span class="sc">|&gt;</span> </span>
<span id="cb6-544"><a href="#cb6-544" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb6-545"><a href="#cb6-545" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> lexdec_young, <span class="at">y =</span> lexdec_old, <span class="at">colour =</span> word_category) <span class="sc">+</span></span>
<span id="cb6-546"><a href="#cb6-546" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb6-547"><a href="#cb6-547" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-548"><a href="#cb6-548" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-549"><a href="#cb6-549" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Warum brauchen wir unseren <span class="in">`df_eng_wide`</span>-Datensatz, um @fig-old_young zu erstellen? Mit anderen Worten, warum ist <span class="in">`df_eng_wide`</span> die geeignete Struktur, aber nicht <span class="in">`df_eng_long`</span> für ein solches Streudiagramm?</span>
<span id="cb6-550"><a href="#cb6-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-551"><a href="#cb6-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-552"><a href="#cb6-552" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Benutze <span class="in">`df_eng_long`</span> und die Funktion <span class="in">`summarise()`</span>, die wir im letzten Abschnitt gesehen haben, und reproduziere die folgende Zusammenfassung:</span>
<span id="cb6-553"><a href="#cb6-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-556"><a href="#cb6-556" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-557"><a href="#cb6-557" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-558"><a href="#cb6-558" aria-hidden="true" tabindex="-1"></a>df_eng_long <span class="sc">|&gt;</span> </span>
<span id="cb6-559"><a href="#cb6-559" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb6-560"><a href="#cb6-560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb6-561"><a href="#cb6-561" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(time),</span>
<span id="cb6-562"><a href="#cb6-562" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(time),</span>
<span id="cb6-563"><a href="#cb6-563" aria-hidden="true" tabindex="-1"></a>    <span class="at">.by =</span> response</span>
<span id="cb6-564"><a href="#cb6-564" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-565"><a href="#cb6-565" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-566"><a href="#cb6-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-567"><a href="#cb6-567" aria-hidden="true" tabindex="-1"></a>Hinweis: Müssen Sie <span class="in">`NA`</span> entfernen (wir haben im letzten Abschnitt gesehen, wie man das macht)?</span>
<span id="cb6-568"><a href="#cb6-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-569"><a href="#cb6-569" aria-hidden="true" tabindex="-1"></a><span class="fu">## Session Info {.unnumbered}</span></span>
<span id="cb6-570"><a href="#cb6-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-573"><a href="#cb6-573" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-574"><a href="#cb6-574" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb6-575"><a href="#cb6-575" aria-hidden="true" tabindex="-1"></a><span class="co">#| echo: false</span></span>
<span id="cb6-576"><a href="#cb6-576" aria-hidden="true" tabindex="-1"></a><span class="fu">RStudio.Version</span>()<span class="sc">$</span>version</span>
<span id="cb6-577"><a href="#cb6-577" aria-hidden="true" tabindex="-1"></a><span class="fu">RStudio.Version</span>()<span class="sc">$</span>release_name</span>
<span id="cb6-578"><a href="#cb6-578" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-579"><a href="#cb6-579" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-580"><a href="#cb6-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-581"><a href="#cb6-581" aria-hidden="true" tabindex="-1"></a>Hergestellt mit <span class="in">`r R.version.string`</span> (<span class="in">`r R.version$nickname`</span>) und RStudioversion 2023.9.0.463 (Desert Sunflower).</span>
<span id="cb6-582"><a href="#cb6-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-585"><a href="#cb6-585" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-586"><a href="#cb6-586" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb6-587"><a href="#cb6-587" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-588"><a href="#cb6-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-589"><a href="#cb6-589" aria-hidden="true" tabindex="-1"></a><span class="fu">## Literaturverzeichnis {.unlisted .unnumbered visibility="uncounted"}</span></span>
<span id="cb6-590"><a href="#cb6-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-591"><a href="#cb6-591" aria-hidden="true" tabindex="-1"></a>::: {#refs custom-style="Bibliography"}</span>
<span id="cb6-592"><a href="#cb6-592" aria-hidden="true" tabindex="-1"></a>:::</span>
</code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>